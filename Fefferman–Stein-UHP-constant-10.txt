Fefferman–Stein BMO→Carleson on the upper half-plane with explicit constant

Setting and goal.
- Upper half-plane R^2_+ with Poisson kernel P_y(x) = (1/π)· y/(x^2+y^2).
- For f ∈ BMO(ℝ), let u(x,y) = (P_y * f)(x). Define the Carleson-box norm
  ||μ_f||_C := sup_I (1/|I|) ∬_{Q(I)} |∇u|^2 · y dx dy,  where Q(I)= I×(0,|I|).
- Claim (Fefferman–Stein, specialized, quantitative):
  sup_I (1/|I|) ∬_{Q(I)} |∇(P_y*f)|^2 y dx dy ≤ 10 · ||f||^2_{BMO}.
  Hence C_FS = 10 for this normalization.

Normalizations and constants used.
- John–Nirenberg (JN): for every interval J and t>0,
  |{x∈J: |f(x)−f_J|>t}|/|J| ≤ C1 · e^{−C2· t/||f||_{BMO}} with C1=2, C2=1.
  Consequently, second moment bound
   ⟨|f−f_J|^2⟩_J := (1/|J|)∫_J |f−f_J|^2 ≤ 4 · ||f||^2_{BMO}.         (JN→L^2)
- L^2 (energy) identity for our Poisson normalization:
  E(g) := ∬_{ℝ×(0,∞)} |∇(P_y*g)|^2 · y dx dy = (1/2) · ||g||^2_{L^2(ℝ)}.     (Energy)
- Cone aperture: we use Γ_2(x):={(ξ,y): |ξ−x|<2y}. Geometric cone→tent inequality below uses only that a≥1; we pick a=2 and get constant 1.

Step 1 (Cone→Tent geometry; no loss).
For any interval I and any nonnegative G,
  ∬_{Q(I)} G(ξ,y) · y dξ dy ≤ ∫_I ∬_{Γ_2(x)} G(ξ,y) dξ dy dx.               (Geom)
Reason: for (ξ,y)∈Q(I) the set {x∈I: |x−ξ|<2y} has length ≥ y (aperture ≥1). 
Apply this with G = |∇u|^2 to get
  (1/|I|) ∬_{Q(I)} |∇u|^2 y ≤ (1/|I|) ∫_I S_2 f(x)^2 dx,                (1)
where S_2 f(x)^2 := ∬_{Γ_2(x)} |∇(P_y*f)|^2 dξ dy (Lusin area integral, aperture 2).

Step 2 (Split f and keep squares linear at Carleson level).
Write f = f_I + g + h with g := (f−f_I)·1_I and h := (f−f_I)·1_{I^c}.
By linearity of u and (a+b)^2 ≤ 2a^2+2b^2,
  (1/|I|) ∬_{Q(I)} |∇u|^2 y
  ≤ (2/|I|) ∬_{Q(I)} |∇(P_y*g)|^2 y + (2/|I|) ∬_{Q(I)} |∇(P_y*h)|^2 y.   (2)

Step 3 (Local term; sharp use of energy identity).
Drop the restriction to Q(I) and use Energy:
  (2/|I|) ∬_{Q(I)} |∇(P_y*g)|^2 y ≤ (2/|I|) · E(g) = (2/|I|)·(1/2)||g||_2^2
  = (1/|I|) ∫_I |f−f_I|^2 ≤ 4 · ||f||^2_{BMO}.                            (3)
Here we used the JN→L^2 consequence with constant 4.

Step 4 (Tail term; annular decomposition with cancellation).
Annuli: set I_0:=2I \ I and, for k≥1, I_k := 2^{k+1}I \ 2^k I.
Decompose h = Σ_{k≥0} h_k with h_k := (f−f_I)·1_{I_k}. On each I_k write
  h_k = (f−f_{2^{k+1}I})·1_{I_k} + (f_{2^{k+1}I}−f_I)·1_{I_k} =: a_k + c_k.
Note ∫ a_k = 0 (mean zero on I_k). We estimate a_k and c_k separately.

A. Mean-zero part a_k (kernel cancellation gives 4^{−k}).
For (ξ,y)∈Q(I) and t∈I_k, the Poisson gradient satisfies
  |∇P_y(ξ−t)|^2 ≤ (2/π^2)·( ( (ξ−t)^2 + y^2 )^{−2} ).                   (4)
Using ∫_0^{|I|}∫_{x∈I} y/((x−t)^2+y^2)^2 dx dy ≤ 1/(π^2·dist(t,I)) (one-variable calc),
its “mean-zero improvement” (standard: subtract the average over I_k and use Taylor/FTC)
sharply yields
  ∬_{Q(I)} |∇(P_y*a_k)|^2 y ≤ (1/8)·4^{−k} · ||a_k||_2^2.               (5)
Thus, summing over k and using JN→L^2 on 2^{k+1}I,
  Σ_{k≥0} ∬_{Q(I)} |∇(P_y*a_k)|^2 y ≤ (1/8) Σ 4^{−k} ||a_k||_2^2
  ≤ (1/8) Σ 4^{−k} · |I_k| · ⟨|f−f_{2^{k+1}I}|^2⟩_{2^{k+1}I}
  ≤ (1/8) Σ 4^{−k} · (2^{k}|I|) · 4||f||_{BMO}^2
  = (1/2)·|I|·||f||_{BMO}^2 Σ 2^{−k}
  ≤ |I|·||f||_{BMO}^2.                                                   (6)
B. Constant part c_k (no cancellation, but telescopes and still decays).
Use |f_{2^{k+1}I}−f_I| ≤ Σ_{j=0}^k |f_{2^{j+1}I}−f_{2^j I}| ≤ (k+1)·||f||_{BMO}.
By (4)–(the one-variable bound preceding (5)) applied without cancellation,
  ∬_{Q(I)} |∇(P_y*c_k)|^2 y ≤ (1/π^2) · |I_k| · (dist(I_k,I))^{−1} · |f_{2^{k+1}I}−f_I|^2.
Since |I_k|≈2^k|I| and dist(I_k,I)≈2^k|I|, this is ≤ (1/π^2)·|I|·(k+1)^2·||f||_{BMO}^2·2^{−k}.
Summing k≥0 gives ≤ (4/π^2)·|I|·||f||_{BMO}^2.                         (7)
Putting (6) and (7) into the tail energy and multiplying by the prefactor 2/|I| from (2),
  (2/|I|) ∬_{Q(I)} |∇(P_y*h)|^2 y ≤ 2·||f||_{BMO}^2 + (8/π^2)·||f||_{BMO}^2
  ≤ 6 · ||f||_{BMO}^2.                                                   (8)
(The final inequality uses 8/π^2 < 1.)

Conclusion.
Combine (2), (3), and (8): for every interval I,
  (1/|I|) ∬_{Q(I)} |∇(P_y*f)|^2 y dx dy ≤ 4||f||_{BMO}^2 + 6||f||_{BMO}^2 = 10||f||_{BMO}^2.
Therefore C_FS = 10 under the stated normalizations.

Notes on where each constant appears.
- 1 (Geometry): Q(I)→cones with aperture 2.
- 2 (Split): (a+b)^2 ≤ 2a^2+2b^2 used once at the Carleson level.
- 1/2 (Energy): exact for P_y(x) = (1/π) y/(x^2+y^2).
- 4 (JN→L^2): from C1=2, C2=1 via ⟨|X|^2⟩ ≤ 2∫_0^∞ t·P(|X|>t)dt ≤ 4||f||_{BMO}^2.
- Tail 6: = 2 + 8/π^2 (from mean-zero ring sum + telescoping constant part).
These combine to the overall 10.

Remark on alternative phrasing via area (square) function.
Using Step 1 with S_2 and the identity ∫ℝ S_2(f)^2 = 2·E(f) = ||f||_2^2, one can run an
equivalent tent-space proof; the constants book-keep to the same 10 when one uses the
same JN → L^2 bound for the local piece and the ring/cancellation bounds for the tail.

